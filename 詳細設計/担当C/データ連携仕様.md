## API間データ連携仕様

| No. | 画面イベント                          | 画面ID | API名                         | メソッド | 送信データ（リクエスト）                                                                                         | 受信データ（レスポンス）                                                                         | 次の処理                             |
|-----|----------------------------------------|--------|---------------------------------|----------|-------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|--------------------------------------|
| 1   | トップページ表示                       | F01    | GET /api/top-page             | GET      | なし                                                                                                              | カテゴリ一覧・新着商品（任意）・バナー（任意）                                                                                     | 商品カテゴリ一覧・新着商品（任意）・バナー（任意）を画面に表示               |
| 2   | 商品一覧ページ表示                     | F02    | GET /api/products               | GET      | category_id                                                                                                       | 商品一覧                                                                                         | 商品リストを表示                     |
| 3   | 商品詳細ページ表示                     | F03    | GET /api/products/{product_id}  | GET      | product_id                                                                                                        | 商品詳細情報                                                                                     | 商品詳細を表示                       |
| 4   | カートに商品追加                       | F03    | POST /api/cart/add              | POST     | { product_id, quantity }                                                                                          | { success: true, cart_items }                                                                    | カートページに反映して表示                   |
| 5   | カートページ表示                       | F04    | POST /api/cart                  | GET      | session_id or user_id                                                                                       | 現在のカート情報                                                                                 | カート一覧を表示                     |
| 6   | カート商品数量変更                     | F04    | GET /api/cart           | POST     | { cart_item_id, quantity }                                                                                        | { success: true, updated_cart }                                                                  | 画面更新                             |
| 7   | カート商品削除                         | F04    | DELETE /api/cart           | POST     | { cart_item_id }                                                                                                  | { success: true, updated_cart }                                                                  | 画面更新                             |
| 8   | 購入手続きページ表示                   | F05    | POST /api/cart/checkout         | POST     | session_id or user_id                                                                                       | 購入予定カート情報                                                                               | 購入フォームを表示                     |
| 9  | 注文確認画面表示                       | F06    | POST /api/orders/preview        | POST     | { shipping_address, payment_method, cart_items }                                                                  | 計算結果（合計金額、送料、税金等）                                                               | 確認画面を表示                         |
| 10  | 注文確定                               | F06    | POST /api/orders                | POST     | { customer_info, shipping_address, payment_method, cart_items }                                                   | { order_id, order_number, payment_status }                                                       | 購入完了ページへ遷移                     |
| 11  | 注文完了ページ表示                     | F07    | GET /api/orders/{order_id}      | GET      | order_id                                                                                                          | 注文情報                                                                                         | 注文完了画面を表示                     |
| 12  | お問い合わせ送信                       | F12    | POST /api/contacts              | POST     | { name, email, message }                                                                                          | { success: true }                                                                                | 送信完了メッセージを表示               |
| 13  | 管理者ログイン                         | A01    | POST /api/admin/login           | POST     | { username, password }                                                                                           | { token, role }                                                                                  | 管理ダッシュボードへ遷移                   |
| 14  | ダッシュボード表示                     | A02    | GET /api/admin/dashboard        | GET      | Authorization Header                                                                                            | 各種サマリー情報                                                                                 | ダッシュボードを表示                   |
| 15  | 商品一覧取得                           | A03    | GET /api/admin/products         | GET      | { search_keyword, category_id, page }                                                                            | 商品一覧データ                                                                                   | 一覧表示                             |
| 16  | 商品登録                               | A04    | POST /api/admin/products        | POST     | { name, description, price, category_id, image_url, stock_quantity }                                              | { success: true, product_id }                                                                    | 画面一覧ページへ遷移                     |
| 17  | 商品編集                               | A04    | PUT /api/admin/products/{id}    | PUT      | { name, description, price, category_id, image_url, stock_quantity }                                              | { success: true }                                                                                | 更新後リストへ戻る                   |
| 18  | カテゴリ一覧取得                       | A05    | GET /api/admin/categories       | GET      | なし                                                                                                              | カテゴリ一覧                                                                                     | 表示                                 |
| 19  | カテゴリ登録・編集                     | A05    | POST /api/admin/categories      | POST     | { name, description }                                                                                            | { success: true, category_id }                                                                   | 更新後リストへ戻る                   |
| 20  | 注文一覧取得                           | A06    | GET /api/admin/orders           | GET      | { search_keyword, status, page }                                                                                 | 注文一覧データ                                                                                   | 一覧表示                             |
| 21  | 注文詳細取得                           | A06    | GET /api/admin/orders/{id}      | GET      | order_id                                                                                                          | 注文詳細                                                                                         | 詳細表示                             |
| 22  | 注文ステータス更新                     | A06    | PUT /api/admin/orders/{id}      | PUT      | { status, payment_status }                                                                                       | { success: true }                                                                                | 更新結果を反映して表示                           |
| 23  | 在庫一覧取得                           | A07    | GET /api/admin/inventory        | GET      | なし                                                                                                              | 商品ごとの在庫一覧                                                                               | 表示                                 |
| 24  | 在庫一括更新                           | A07    | POST /api/admin/inventory/update| POST     | [{ product_id, stock_quantity }]                                                                                  | { success: true }                                                                                | 更新反映                             |
| 25  | CSVデータダウンロード                   | A08    | GET /api/admin/export/orders    | GET      | { date_range, status }                                                                                           | CSVファイルURL                                                                                   | ダウンロード                         |
| 26  | CSVデータアップロード                   | A08    | POST /api/admin/import/products | POST     | CSVファイル                                                                                                       | { success: true }                                                                                | 結果確認                             |
| 27  | お問い合わせ一覧取得                   | A09    | GET /api/admin/contacts         | GET      | { page, status }                                                                                                 | お問い合わせ一覧                                                                               | 表示                                 |
| 28  | お問い合わせ詳細取得                   | A09    | GET /api/admin/contacts/{id}    | GET      | contact_id                                                                                                        | 問い合わせ詳細                                                                                   | 表示                                 |
| 29  | 管理者一覧取得                         | A10    | GET /api/admin/users            | GET      | なし                                                                                                              | 管理者ユーザー一覧                                                                               | 表示                                 |
| 30  | 管理者登録・編集                       | A10    | POST /api/admin/users           | POST     | { username, password, role }                                                                                     | { success: true, admin_user_id }                                                                 | 更新後表示                           |
| 31  | エラーログ一覧取得                     | A11    | GET /api/admin/error-logs       | GET      | { date_range, level }                                                                                            | エラーログ一覧                                                                                   | 表示                                 |
