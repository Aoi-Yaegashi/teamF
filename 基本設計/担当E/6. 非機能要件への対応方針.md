# 6.非機能要件への対応方針 

## 6.1 性能 

### 6.1.1 商品一覧・詳細ページの表示速度 

 #### 【要件】 

  商品一覧・詳細ページの表示速度は 1.5秒以内（回線：4G相当）とする。 

 #### 【対応策】 

  - ぺージの初期表示に必要なリソース（HTML、CSS、JavaScript、画像）の合計サイズを最適化し、通信遅延を考慮した設計とする。 

  - 画像は1枚あたり300KB以下に自動圧縮し、遅延要因を排除する。 

  - 画像形式はWebP等の高圧縮フォーマットを優先的に利用し、必要に応じてリサイズも実施する。 

  - 画像圧縮・最適化はサーバーサイドまたはアップロード時に自動処理する仕組みを構築する。 

 

### 6.1.2 カート操作・ボタン等の応答時間 

 #### 【要件】 

  カート操作、ボタン等の応答時間は1秒以内とする。 

 #### 【対応策】 

  - 非同期通信（Ajax等）を活用し、ページ全体の再読込を避ける。 

  - サーバー側APIのレスポンスタイムを最適化し、1アクションあたり1秒以内で完了するよう設計する。 

  - レスポンス遅延時はローディングインジケーターを表示し、ユーザー体験の低下を防ぐ。 

 

### 6.1.3 同時アクセス体制 

 #### 【要件】 

  50ユーザー同時接続時でも、主要機能（商品閲覧、カート操作、購入処理等）が遅延しない構成とする。 

 #### 【対応策】 

  - サーバーは同時50リクエストに耐えうるスペックを確保し、必要に応じてスケーラビリティ（オートスケール等）を設計に盛り込む。 

  - キャッシュ（CDN、DBキャッシュ等）を活用し、アクセス集中時の負荷を軽減する。 

  - 負荷テストを実施し、ボトルネックの早期発見・改善を行う。 

 

### 6.1.4 商品画像の自動圧縮 

 #### 【要件】 

  商品画像は1枚あたり300KB以下に自動圧縮し、読み込みパフォーマンスを確保する。 

 #### 【対応策】 

  - 画像アップロード時に自動圧縮処理（例：Squoosh、Image Resizer等のツールや自作バッチ）を実装し、300KB超過時は自動で圧縮・リサイズする。 

  - 圧縮後の画質やアスペクト比が保持されるよう、最適な圧縮アルゴリズム・設定を選定する。 

  - WebP等の高効率画像フォーマットを標準採用し、対応ブラウザには自動でWebPを配信する。 

 

## 6.2. セキュリティ 

### 6.2.1 通信の暗号化 

 #### 【要件】 

  全通信において SSL/TLS（TLS1.2以上） を使用する。 

 #### 【対応策】 

  - サイト全体をHTTPS化し、HTTPリクエストは自動的にHTTPSへリダイレクト。 

  - TLS1.2以上のみ許可し、古いバージョン（TLS1.0/1.1、SSL）は無効化する。 

  - 証明書は信頼できる認証局（CA）から取得・管理する。 

### 6.2.2 管理画面ログイン認証 

 #### 【要件】 

  管理画面ログインは ID＋パスワード認証（パスワード8文字以上、記号含む）とする。 

 #### 【対応策】 

  - パスワードは8文字以上、英大文字・小文字・数字・記号の組み合わせを必須とするバリデーションを実装する。 

  - パスワードはハッシュ化（例：bcrypt、Argon2）してDBに保存する。 

  - パスワードリセット機能は本人確認（メール認証等）を必須とする。 

### 6.2.3 管理者アカウントロック 

 #### 【要件】 

  管理者ログイン失敗5回でアカウントを15分間ロックする。 

 #### 【対応策】 

  - ログイン失敗回数をDBでカウントし、5回連続失敗で該当アカウントを15分間ロックする。 

  - ロック中はログイン画面に「ロック中」の旨を表示し、解除までの残り時間も案内する。 

  - ログイン成功でカウントはリセットする。 

### 6.2.4 脆弱性対策 

 #### 【要件】 

 XSS、SQLインジェクション等の脆弱性対策を実装する。 

 #### 【対応策】 

  - 入力値のサニタイズ・エスケープ処理を全フォームで徹底する。 

  - DBアクセスはプリペアドステートメントを必須とし、SQLインジェクションを防止する。 

  - 出力時はHTMLエスケープを徹底し、XSSを防止する。 

  - CSRFトークンによるリクエスト検証を実装する。 

### 6.2.5 データ出力の安全性 

 #### 【要件】 

  顧客・注文データは パスワード付きCSV形式で出力可能にする。 

 #### 【対応策】 

  - CSVファイル生成時に自動でパスワード付きZIP形式に圧縮する。 

  - パスワードは管理者が任意に設定、またはシステムが自動生成し、別途通知する。 

  - 出力ファイルにはアクセス制限を設け、管理者のみダウンロード可能とする。 

### 6.2.6 バックアップとデータ損失対策 

 #### 【要件】 

  管理者・利用者の誤操作によるデータ損失に備え、定期バックアップを検討する。 

 #### 【対応策】 

  - データベースの定期自動バックアップを設定する。 

  - バックアップデータは暗号化し、外部ストレージやクラウドに安全に保管する。 

  - 復元手順をマニュアル化し、定期的にリストアテストを実施する。 

  - 重要操作は確認ダイアログや二重認証を導入し、誤操作リスクを低減する。 

 

## 6.3 可用性 

### 6.3.1 月間稼働率 

 #### 【要件】 

  月間稼働率は 99.5%以上を維持（深夜の定期メンテナンス時間を除く）する。 

 #### 【対応策】 

  - システム構成・運用体制を設計時から高可用性（HA）を意識し、冗長化やフェイルオーバー構成を検討する。 

  - メンテナンス時間は事前に告知し、稼働率計算から除外する。 

### 6.3.2 データバックアップ 

 #### 【要件】 

  サイトデータは毎日1回自動バックアップし、保存期間は30日間とする。 

 #### 【対応策】 

  - バックアップは自動化し、毎日深夜等の負荷が低い時間帯に実施する。 

  - バックアップデータは暗号化し、30日間分を安全なストレージに保管する。 

  - バックアップの成否を監視し、失敗時は管理者へ通知する。 

### 6.3.3 障害発生時の自動通知 

 #### 【要件】 

  サーバ障害発生時、5分以内に管理者へ自動メールで通知する。 

 #### 【対応策】 

  - サーバ監視ツール（例：Zabbixなど）を導入し、障害検知時は即座にアラートメールを管理者へ送信する設定を行う。 

  - メール通知テンプレートを用意し、障害内容・発生時刻・影響範囲等を自動で記載する。 

  - 監視システムの設定により、複数管理者や電話通知も選択可能にする。 

### 6.3.4 復旧目標時間（MTTR） 

 #### 【要件】 

  システム障害発生からの復旧目標時間（MTTR）は 2時間以内とする。 

 #### 【対応策】 

  - 障害発生時は即時対応フローに従い、2時間以内の復旧を目指す。 

  - 監視ツールによる迅速な障害検知と通知で初動を早め、復旧手順を標準化する。 

  - 復旧手順の定期的な見直し・訓練を実施する。 

### 6.3.5 障害対応フロー 

 #### 【要件】 

  システム障害発生時の対応フローはマニュアルに記載する。 

 #### 【対応策】 

  - 障害発生時の初動対応、エスカレーション、復旧作業、影響範囲の連絡、事後報告までの手順をマニュアル化する。 

  - マニュアルは定期的に見直し、最新の運用体制・連絡先に更新する。 

 

## 6.4 その他 

### 6.4.1 保守・運用性に関する方針 

#### 6.4.1.1 商品登録作業の効率化 

 ##### 【要件】 

   商品1件の登録作業は3分以内を目安とする（画像登録含む）。 

 ##### 【対応策】 

  - 商品登録画面は入力項目を整理し、必須項目のみを初期表示する。 

  - 画像アップロードはドラッグ＆ドロップ対応、複数同時選択を可能とする。 

  - 入力補助（自動入力・候補表示・バリデーション）を実装し、手間を削減する。 

  - 登録完了までのステップ数を最小化し、プレビュー機能も提供する。 

#### 6.4.1.2 情報アクセスの迅速化 

 ##### 【要件】 

  管理画面内で、商品／注文情報には3クリック以内でアクセス可能とする。 

 ##### 【対応策】 

  - ダッシュボードやメインメニューから、商品・注文一覧へのショートカットを配置する。 

  - 検索・フィルタ機能を強化し、目的の情報へ素早く到達できるUI設計を行う。 

  - パンくずリストや戻るボタンで、迷わず操作できる導線を確保する。 

#### 6.4.1.3 管理者向けマニュアルの提供 

 ##### 【要件】 

  管理者向けのPDF形式マニュアル（10ページ以内）を納品時に提供する。 

 ##### 【対応策】 

  - 商品登録、注文管理、データ出力、ユーザー管理、トラブル対応など主要機能の操作手順を網羅する。 

  - 図解や画面キャプチャを多用し、直感的に理解できる内容とする。 

  - マニュアルは10ページ以内に収め、目次・索引も付与する。 

#### 6.4.1.4 管理画面の推奨動作環境 

 ##### 【要件】 

  管理画面の推奨動作環境はGoogle Chrome／Microsoft Edge 最新版とする。 

 ##### 【対応策】 

  - 対象ブラウザでの動作検証を徹底し、主要機能が正常に利用できることを確認する。 

  - 推奨環境外のブラウザ利用時は、警告メッセージを表示する。 

  - 新ブラウザバージョン対応のため、定期的な検証・アップデートを運用計画に組み込む。 

### 6.4.2 拡張性に関する方針 

#### 6.4.2.1 仕様変更への迅速対応 

 ##### 【要件】 

  新規画面追加や軽微な仕様変更への対応期間は5営業日以内を目安とする構成にする。 

 ##### 【対応策】 

  - システムはモジュール化・コンポーネント化された設計とし、個別機能の追加・変更が他部分に影響しない構造とする。 

  - ビジネスロジックや画面UIは分離し、再利用性・保守性を高める。 

  - 設計書やドキュメントを整備し、開発者が仕様を迅速に把握できる体制を構築する。 

#### 6.4.2.2 外部API・プラグイン連携 

 ##### 【要件】 

  外部API接続によるSNSや分析ツールとのプラグイン連携可能な設計とする。 

 ##### 【対応策】 

  - RESTful API等の標準的なインターフェースを採用し、外部サービス連携を容易にする。 

  - プラグイン方式で機能追加できるよう、APIエンドポイントや認証方式を明確に設計する。 

  - API仕様書（OpenAPI等）を整備し、将来の拡張や他システムとの連携を円滑化する。 

#### 6.4.2.3 マルチデバイス対応 

 ##### 【要件】 

  デスクトップ・スマートフォン・タブレットにて、横幅375px以上の表示環境で主要画面100%表示崩れなしにする。 

 ##### 【対応策】 

  - レスポンシブWebデザインを採用し、主要画面は375px以上の幅で表示崩れが発生しないようスタイル設計する。 

  - ブラウザの最新安定版で動作検証を実施し、UIの一貫性を担保する。 

  - レイアウトやコンポーネントは柔軟に拡張できる設計とする。 

#### 6.4.3.4 将来的な機能追加への備え 

 ##### 【要件】 

  海外展開・定期購入など、将来的な機能追加を想定した構成とする。 

 ##### 【対応策】 

  - システム全体を拡張性重視で設計し、言語・通貨対応やサブスクリプション機能などの追加を見越したデータベース・ロジック設計を実施する。 

  - マイクロサービスアーキテクチャやクラウドサービスの活用を検討し、負荷増加や機能追加時も柔軟に対応可能とする。 

  - 各種設定値や表示文言は外部ファイル化し、将来的な多言語・多通貨対応が容易な構成とする。 