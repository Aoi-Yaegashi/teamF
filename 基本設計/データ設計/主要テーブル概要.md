### 主要テーブル概要

---


#### Product（商品）テーブル

##### 概要

`Product` テーブルは、ECサイトで販売される商品の基本情報を管理する。

##### 制約・注意点

* `product_id` はプライマリキーとして一意である必要がある。
* `category_id` は存在するカテゴリIDと紐づける（外部キー制約）。
* 在庫数は負の値を許容しない。
* 価格は0以上の数値で設定する。

---

#### Category（カテゴリ）テーブル

##### 概要

`Category` テーブルは、商品の分類を管理し、商品をカテゴリごとにグループ化する。

##### 属性説明

* `category_id`: カテゴリを一意に識別するID。
* `name`: カテゴリの名称。
* `description`: カテゴリの詳細説明。

##### 制約・注意点

* `category_id` はプライマリキーで一意。
* 商品登録時には必ず存在するカテゴリIDを指定する必要がある。

---

#### Customer（顧客）テーブル

##### 概要

`Customer` テーブルは、商品購入者の基本情報を管理する。

##### 属性説明

* `customer_id`: 顧客を一意に識別するID。
* `name`: 顧客の氏名。
* `email`: 顧客のメールアドレス。
* `phone_number`: 顧客の電話番号。
* `created_at`: 顧客情報登録日時。

##### 制約・注意点

* `customer_id` は一意である必要がある。
* メールアドレスは重複を避けるため一意性制約を推奨する。
* 電話番号には形式チェックを行う。

---

#### Order（注文）テーブル

##### 概要

`Order` テーブルは、顧客からの注文情報を管理する。

##### 属性説明

* `order_id`: 注文を一意に識別するID。
* `customer_id`: 注文者の顧客ID。
* `order_number`: 管理用・外部公開用のユニークな注文番号。
* `order_date`: 注文日時。
* `status`: 注文の現在の状態（例：受付中、発送済み、キャンセル）。
* `total_amount`: 注文合計金額。

##### 制約・注意点

* `order_id` はプライマリキーで一意。
* `customer_id` は必ず存在する顧客IDでなければならない。
* `status` はシステムで定義された有効な値に限定する。
* 合計金額は0以上である必要がある。

---

#### OrderItem（注文商品）テーブル

##### 概要

`OrderItem` テーブルは、1件の注文に含まれる複数の商品明細を管理する。

##### 属性説明

* `order_item_id`: 注文商品を一意に識別するID。
* `order_id`: 対応する注文のID。
* `product_id`: 注文された商品のID。
* `quantity`: 注文数量。
* `unit_price`: 商品の注文時単価。

##### 制約・注意点

* `order_item_id` はプライマリキーで一意。
* `order_id` と `product_id` はそれぞれ有効な注文・商品IDに紐づける。
* `quantity` は1以上の整数。
* `unit_price` は0以上。

---

#### ShippingInfo（配送情報）テーブル

##### 概要

`ShippingInfo` テーブルは、注文ごとの配送先情報を管理する。

##### 属性説明

* `shipping_info_id`: 配送情報を一意に識別するID。
* `order_id`: 対応する注文のID。
* `recipient_name`: 宛名。
* `postal_code`: 郵便番号。
* `address`: 住所。
* `phone_number`: 電話番号。

##### 制約・注意点

* `shipping_info_id` はプライマリキーで一意。
* `order_id` は存在する注文IDに紐づける必要がある。
* 郵便番号は日本の形式に従って入力チェックを行う。
* 電話番号は適切な形式チェックを行う。

---

#### PaymentInfo（支払情報）テーブル

##### 概要

`PaymentInfo` テーブルは、注文ごとの支払い情報を管理する。

##### 属性説明

* `payment_info_id`: 支払情報を一意に識別するID。
* `order_id`: 対応する注文のID。
* `payment_method`: 支払い方法（例：銀行振込、代金引換）。
* `payment_status`: 支払いステータス（例：未払い、支払い済み）。
* `payment_date`: 支払日時。

##### 制約・注意点

* `payment_info_id` はプライマリキーで一意。
* `order_id` は有効な注文IDに紐づける。
* `payment_method` は事前に定義された方法に限定する。

---

#### OrderStatusHistory（注文ステータス履歴）テーブル

##### 概要

`OrderStatusHistory` テーブルは、注文のステータス変更履歴を管理する。

##### 属性説明

* `history_id`: 履歴レコードを一意に識別するID。
* `order_id`: 対象の注文ID。
* `status`: 変更後のステータス。
* `changed_at`: 変更日時。

##### 制約・注意点

* `history_id` はプライマリキーで一意。
* `order_id` は存在する注文IDに紐づける必要がある。
* `status` は有効なステータスに限定する。
* `changed_at` は正確に記録する。

---

#### Cart（カート）テーブル

##### 概要

`Cart` テーブルは、セッション単位でユーザーのショッピングカート情報を管理する。

##### 属性説明

* `cart_id`: カートを一意に識別するID。
* `session_token`: セッション識別用のトークン。
* `created_at`: カート作成日時。
* `updated_at`: カート更新日時。

##### 制約・注意点

* `cart_id` はプライマリキーで一意。
* `session_token` は重複しないユニークな値とする。
* 作成日時と更新日時は正確に記録する。

---

#### CartItem（カート商品）テーブル

##### 概要

`CartItem` テーブルは、カートに追加された商品情報を管理する。

##### 属性説明

* `cart_item_id`: カート商品を一意に識別するID。
* `cart_id`: 対応するカートID。
* `product_id`: 商品ID。
* `quantity`: 数量。
* `added_at`: カートに追加した日時。

##### 制約・注意点

* `cart_item_id` はプライマリキーで一意。
* `cart_id` は有効なカートIDに紐づける。
* `product_id` は有効な商品IDであること。
* `quantity` は1以上の整数。

---

#### Contact（お問い合わせ）テーブル

##### 概要

`Contact` テーブルは、サイト利用者からの問い合わせを管理する。

##### 属性説明

* `contact_id`: 問い合わせを一意に識別するID。
* `name`: 問い合わせ者の名前。
* `email`: 問い合わせ者のメールアドレス。
* `message`: 問い合わせ内容。
* `created_at`: 送信日時。

##### 制約・注意点

* `contact_id` はプライマリキーで一意。
* メールアドレスは形式チェックを行う。
* 内容は適切に保存し、漏洩防止に注意する。

---

#### PageContent（静的ページ）テーブル

##### 概要

`PageContent` テーブルは、静的ページ（会社概要、規約など）の内容を管理する。

##### 属性説明

* `page_id`: ページを一意に識別するID。
* `title`: タイトル。
* `content`: 本文。
* `updated_at`: 更新日時。

##### 制約・注意点

* `page_id` はプライマリキーで一意。
* コンテンツ更新時は履歴管理を検討する。

---

#### AdminUser（管理ユーザー）テーブル

##### 概要

`AdminUser` テーブルは、管理画面を操作する管理者の情報を管理する。

##### 属性説明

* `admin_user_id`: 管理ユーザーを一意に識別するID。
* `username`: ログイン用ユーザー名。
* `password_hash`: ハッシュ化されたパスワード。
* `role`: 権限レベル。

##### 制約・注意点

* `admin_user_id` はプライマリキーで一意。
* パスワードはハッシュ化して保存し、平文は避ける。
* 権限管理を適切に行う。

---

#### SalePrice（期間限定価格）テーブル

##### 概要

`SalePrice` テーブルは、商品ごとの期間限定価格情報を管理する。

##### 属性説明

* `sale_price_id`: 期間限定価格を一意に識別するID。
* `product_id`: 対象商品のID。
* `sale_price`: セール価格（特別価格）。
* `start_date`: セール開始日。
* `end_date`: セール終了日。

##### 制約・注意点

* `sale_price_id` はプライマリキーで一意。
* `product_id` は有効な商品IDに紐づける必要がある。
* `sale_price` は通常価格（Product.price）より小さいことが推奨される。
* `start_date`〜`end_date` の期間に重複がないよう制御する。
* セール終了後は自動的に通常価格へ戻す運用を想定。
