# 主要テーブル概要

## Product（商品）テーブル

### 概要  
`Product` テーブルは、ECサイトで販売される商品の基本情報を管理します。

### 属性説明  
- `product_id`: 商品を一意に識別するIDです。  
- `name`: 商品の名称を表します。  
- `description`: 商品の詳細な説明を記載します。  
- `category_id`: 商品が属するカテゴリのIDです。  
- `price`: 商品の販売価格を示します。  
- `stock_quantity`: 商品の在庫数を保持します。  
- `image_url`: 商品画像のURLを格納します。

### 制約・注意点  
- `product_id` はプライマリキーとして一意である必要があります。  
- `category_id` は存在するカテゴリIDと紐づける必要があります（外部キー制約）。  
- 在庫数は負の値を許容しません。  
- 価格は0以上の数値で設定します。  

---

## Category（カテゴリ）テーブル

### 概要  
`Category` テーブルは、商品の分類を管理し、商品をカテゴリごとにグループ化します。

### 属性説明  
- `category_id`: カテゴリを一意に識別するIDです。  
- `name`: カテゴリの名称を表します。  
- `description`: カテゴリの詳細説明を記載します。

### 制約・注意点  
- `category_id` はプライマリキーで一意です。  
- 商品登録時には必ず存在するカテゴリIDを指定する必要があります。  

---

## Customer（顧客）テーブル

### 概要  
`Customer` テーブルは、商品購入者の基本情報を管理します。

### 属性説明  
- `customer_id`: 顧客を一意に識別するIDです。  
- `name`: 顧客の氏名を表します。  
- `email`: 顧客のメールアドレスを管理します。  
- `phone_number`: 顧客の電話番号を格納します。  
- `created_at`: 顧客情報登録日時を保持します。

### 制約・注意点  
- `customer_id` は一意である必要があります。  
- メールアドレスは重複登録を避けるため一意性制約を設けることが望ましいです。  
- 電話番号は形式チェックを行うことが推奨されます。  

---

## Order（注文）テーブル

### 概要  
`Order` テーブルは、顧客からの注文情報を管理します。

### 属性説明  
- `order_id`: 注文を一意に識別するIDです。  
- `customer_id`: 注文者である顧客のIDを示します。  
- `order_number`: 注文番号（外部公開用や管理用のユニークな番号）です。  
- `order_date`: 注文日時を記録します。  
- `status`: 注文の現在の状態（例：受付中、発送済み、キャンセルなど）を表します。  
- `total_amount`: 注文合計金額を保持します。

### 制約・注意点  
- `order_id` は一意のプライマリキーです。  
- `customer_id` は必ず存在する顧客IDでなければなりません。  
- `status` はシステムで定義された有効なステータス値に限定します。  
- 合計金額は0以上である必要があります。  

---

## OrderItem（注文商品）テーブル

### 概要  
`OrderItem` テーブルは、1つの注文に含まれる複数の商品明細を管理します。

### 属性説明  
- `order_item_id`: 注文商品を一意に識別するIDです。  
- `order_id`: 対応する注文のIDを示します。  
- `product_id`: 注文された商品のIDです。  
- `quantity`: 注文数量を保持します。  
- `unit_price`: 注文時の商品の単価を記録します。

### 制約・注意点  
- `order_item_id` は一意である必要があります。  
- `order_id` は存在する注文IDに紐づけます。  
- `product_id` は存在する商品IDに紐づけます。  
- `quantity` は1以上の整数であることを保証します。  
- `unit_price` は0以上の値でなければなりません。  

---

## ShippingInfo（配送情報）テーブル

### 概要  
`ShippingInfo` テーブルは、注文ごとの配送先情報を管理します。

### 属性説明  
- `shipping_info_id`: 配送情報を一意に識別するIDです。  
- `order_id`: 対応する注文のIDを示します。  
- `recipient_name`: 配送先の氏名を保持します。  
- `postal_code`: 配送先の郵便番号を記録します。  
- `address`: 配送先の住所を管理します。  
- `phone_number`: 配送先の電話番号を保持します。

### 制約・注意点  
- `shipping_info_id` は一意です。  
- `order_id` は存在する注文IDと紐づける必要があります。  
- 郵便番号は日本のフォーマットに合わせて入力チェックを行うことが望ましいです。  
- 電話番号は適切な形式チェックを推奨します。  

---

## PaymentInfo（支払情報）テーブル

### 概要  
`PaymentInfo` テーブルは、注文ごとの支払い情報を管理します。

### 属性説明  
- `payment_info_id`: 支払情報を一意に識別するIDです。  
- `order_id`: 対応する注文のIDを示します。  
- `payment_method`: 支払い方法（例：銀行振込、代金引換など）を記録します。  
- `payment_status`: 支払いステータス（例：未払い、支払い済みなど）を保持します。  
- `payment_date`: 支払いが完了した日時を記録します。

### 制約・注意点  
- `payment_info_id` は一意である必要があります。  
- `order_id` は有効な注文IDと紐づけます。  
- `payment_method` は定義された方法の中から選択されることが望ましいです。  

---

## OrderStatusHistory（注文ステータス履歴）テーブル

### 概要  
`OrderStatusHistory` テーブルは、注文のステータス変更履歴を管理します。

### 属性説明  
- `history_id`: 履歴レコードを一意に識別するIDです。  
- `order_id`: ステータス変更対象の注文IDです。  
- `status`: 変更後のステータスを記録します。  
- `changed_at`: ステータスが変更された日時を保持します。

### 制約・注意点  
- `history_id` は一意のプライマリキーです。  
- `order_id` は存在する注文IDである必要があります。  
- `status` は有効なステータスの値を保持することが求められます。  
- `changed_at` は変更日時を正確に記録する必要があります。  

---

## Cart（カート）テーブル

### 概要  
`Cart` テーブルは、ユーザーのショッピングカート情報をセッション単位で管理します。

### 属性説明  
- `cart_id`: カートを一意に識別するIDです。  
- `session_token`: セッション識別用のトークンを保持します。  
- `created_at`: カート作成日時を記録します。  
- `updated_at`: カート更新日時を保持します。

### 制約・注意点  
- `cart_id` はプライマリキーとして一意でなければなりません。  
- `session_token` は重複しないユニークな値である必要があります。  
- 作成日時と更新日時は正確に記録される必要があります。  

---

## CartItem（カート商品）テーブル

### 概要  
`CartItem` テーブルは、カート内の商品明細を管理します。

### 属性説明  
- `cart_item_id`: カート商品を一意に識別するIDです。  
- `cart_id`: 対応するカートのIDを示します。  
- `product_id`: カートに追加された商品のIDです。  
- `quantity`: 商品の数量を保持します。  
- `added_at`: 商品がカートに追加された日時を記録します。

### 制約・注意点  
- `cart_item_id` は一意である必要があります。  
- `cart_id` は有効なカートIDに紐づけます。  
- `product_id` は存在する商品IDであることを確認します。  
- `quantity` は1以上の整数値である必要があります。  

---

## Contact（お問い合わせ）テーブル

### 概要  
`Contact` テーブルは、ECサイト利用者からの問い合わせ内容を管理します。

### 属性説明  
- `contact_id`: 問い合わせを一意に識別するIDです。  
- `name`: 問い合わせ者の名前を記録します。  
- `email`: 問い合わせ者のメールアドレスを保持します。  
- `message`: 問い合わせ内容の本文を格納します。  
- `created_at`: 問い合わせ送信日時を記録します。

### 制約・注意点  
- `contact_id` は一意である必要があります。  
- メールアドレスは適切な形式チェックが推奨されます。  
- 問い合わせ内容は適切に保存し、漏洩に注意します。  

---

## PageContent（静的ページ）テーブル

### 概要  
`PageContent` テーブルは、会社概要や特商法などの静的ページの内容を管理します。

### 属性説明  
- `page_id`: ページを一意に識別するIDです。  
- `title`: ページタイトルを記録します。  
- `content`: ページ本文のテキストデータを保持します。  
- `updated_at`: ページ更新日時を記録します。

### 制約・注意点  
- `page_id` はプライマリキーで一意です。  
- コンテンツ更新時は履歴管理を検討してください。  

---

## AdminUser（管理ユーザー）テーブル

### 概要  
`AdminUser` テーブルは、ECサイト管理者のユーザー情報を管理します。

### 属性説明  
- `admin_user_id`: 管理者ユーザーを一意に識別するIDです。  
- `username`: 管理者のログインユーザー名を保持します。  
- `password_hash`: パスワードをハッシュ化して保存します。  
- `role`: 管理者の権限レベルを表します。

### 制約・注意点  
- `admin_user_id` は一意のプライマリキーです。  
- パスワードは安全なハッシュ関数で保存し、平文保存は避けます。  
- 権限管理は適切に設計してください。  
